# Filter - Sort - Paginate

## Filter
- Filter có nghĩa là tìm kiếm một dữ liệu nào đó đúng với những yêu cầu tìm kiếm, ví dụ:


```js

    Course.find({
        name: {
            $regex: /react/,
            $options: 'i'
        }
    })
```

Trong ví dụ trên, chúng ta tìm kiếm tất cả khóa học `react` và không phân biệt viết hoa hay thường `i`


Trong Mongoose, có nhiều method khác nhau để truy vấn dữ liệu từ cơ sở dữ liệu MongoDB. Một số method thường dùng nhất là:

find(): truy vấn tất cả các tài nguyên trong một collection  

findOne(): truy vấn một tài nguyên trong một collection

findById(): truy vấn một tài nguyên dựa trên _id

findOneAndUpdate(): truy vấn một tài nguyên và cập nhật nó

findOneAndRemove(): truy vấn một tài nguyên và xóa nó

count(): đếm số lượng tài nguyên trong một collection

aggregate(): thực hiện các pipeline aggregation trên dữ liệu.



### Cú pháp cơ bản trong mongoose

```js
Model.find(query, [projection], [options], [callback])
```

## Sort
Sử dụng operator $sort trong mongoose để sort theo 1 field nào đó ví dụ:

```js
    Course.find({
        $sort: {
            price: 1,
            reviewAvarage: 1
        }
    })
```

Trong ví dụ trên, chúng ta sẽ sort những khóa học có `price` giãm dần. Trong trường hợp 2 course có giá bằng nhau chúng ta sẽ tiếp tục sort theo field `reviewAvarage` giãm dần

## Paginate
Phân trang cho những dữ liệu có số lượng nhiều

Ví dụ:

```js

    let page = 2
    let perPage = 10

    Course.find({}).skip((page - 1) * perPage).limit(perPage)
    .then((courses) => {
        console.log(courses);
    })
    .catch((error) => {
        console.log(error);
    });
```

Ví dụ chúng ta muốn lấy page số 2, và mỗi page chúng ta cho 10 document. Chúng ta sẽ cần bỏ qua 10 phần tử đầu tiên `(page - 1) * perPage` và lấy tiếp 10 phần tử tiếp theo


# TO DO LIST

[] Hiện thực các api về khóa học

[] Tìm kiếm theo tên khóa học

[] Giới hạn các field trả về

[] Tìm kiếm theo loại hình học

[] Sắp xếp khóa học theo price

[] Phân trang cho khóa học

[] Viết thêm plugin paginate Sử dụng query method để sử dụng lại chức năng phân trang