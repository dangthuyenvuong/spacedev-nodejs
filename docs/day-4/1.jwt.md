# Authentication

JWT là gì ?

JWT (Json-Web-Token) là một chuẩn mã hóa dữ liệu được sử dụng trong việc xác thực và bảo mật trong các ứng dụng web. Nó dùng để gửi thông tin giữa hai bên mà không cần sử dụng một cơ sở dữ liệu để lưu trữ các thông tin đăng nhập.

Đăng nhập bằng JWT trãi qua các giai đoạn sau:

Bước 1: User sử dụng username, password để tiến hành đăng nhập

Bước 2: Server nhận được thông tin đăng nhập tiến hành kiểm tra thông tin user trong database, nếu không có vấn đề gì thì sẽ tiến hành tạo accessToken và refreshToken response về client

Bước 3: Client có thông tin accessToken và refreshToken lưu vào store

Bước 4: Khi user thực hiện 1 request có yêu cầu quyền, sẽ gửi kèm accessToken thông qua headers lên server

Bước 5: Server nhận đc request, tiến hành kiểm tra token, giải mã token và xác định quyền để thực hiện request đó, nếu đạt yêu cầu thì request sẽ đc thực thi và response về user kết quả



## refresh token

Dùng để tạo mới accessToken khi hết hạn

# Payload

Có thể lưu payload trong jwt theo chuẩn sau, nhưng không bắt buộc

    "iss" (Issuer) : Định danh người gửi token.

    "sub" (Subject) : Định danh người dùng mà token được gửi đến.

    "aud" (Audience) : Định danh người dùng hoặc hệ thống mà token được gửi đến.

    "exp" (Expiration Time) : Thời điểm hết hạn của token, theo định dạng UNIX timestamp.

    "nbf" (Not Before) : Thời điểm token trở thành hợp lệ, theo định dạng UNIX timestamp.

    "iat" (Issued At) : Thời điểm token được tạo, theo định dạng UNIX timestamp.

    "jti" (JWT ID) : Một ID duy nhất cho token, giúp phân biệt các token khác nhau.

# TO DO LIST

[] Cập nhật api register, mã hóa password

[] Implement jwt vào hệ thống

    B1: Cài đặt thư viện jsonwebtoken

    > yarn add jsonwebtoken

    B2: Sinh mã access_token_key

    > node -e "console.log(require('crypto').randomBytes(32).toString('hex'));"

    B2: Cài đặt api login, input là username, password

    B3: Kiểm tra username, password trong database. Đúng thì generate accessToken và refreshToken

[] Cập nhật api get thông tin cá nhân

[] Cập nhật api cập nhật thông tin cá nhân

[] Cài đặt api refresh-token
